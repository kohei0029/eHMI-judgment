# eHMI-judgment

## 概要
本リポジトリでは、歩行者とロボットの衝突点における先行・後行の判断を行うROSノード `/eHMI/judgment_maker` を提供します。この判断結果を活用することで、様々なeHMI (External Human-Machine Interface) に応用し、提示内容を柔軟に切り替えることが可能です。

---

## システム情報
- **プロジェクト名**: eHMI-judgment  
- **最終編集日**: 2025年1月28日  
- **開発環境**:
  - **ハードウェア**: MSI GF63 Thin MS-16R4
  - **OS**: Ubuntu 20.04
  - **プラットフォーム**: ROS
  - **使用言語**: C++

---

## 機能
### 主なトピック
- **購読トピック**: `/mpc/optimal_scenario`  
  - パブリッシュ元: `/mpc/control_node`
- **パブリッシュトピック**: `/eHMI/judgment`

### ノードの処理概要
1. `/mpc/optimal_scenario` トピックを購読します。
2. 購読したデータを基に、歩行者とロボットの ΔTTCP (Time-To-Collision Point) を算出します。
3. ΔTTCP の符号によって以下の判断を行います:
   - **正の値**: 歩行者が衝突点を先行。
   - **負の値**: ロボットが衝突点を先行。
4. 判断結果を `/eHMI/judgment` トピックとしてパブリッシュします。

### 応用例
生成した判断結果を利用することで、
- eHMIの提示内容を状況に応じて切り替えることが可能となります。

---

## 注意事項
- **守秘義務**: ノードグラフ全体の構造は公開しておりません。また、プログラム全体を動かすlaunchファイルも公開していません。
- 現在、このノードは不完全な状態です。特に、以下の課題が存在します:
  - 判断がチャタリングする問題。
  - より自然な判断を生成するための調整が必要。

今後の改良により、これらの問題に対応する予定です。
